# Documentació Tècnica del Servei d'Estàtics (s6-static)

El servei **`s6-static`** és el component responsable de la capa visual (Frontend Assets) d'**Extagram**. La seva funció principal és servir els fitxers de disseny (`.css`) i els recursos gràfics de la interfície (`.svg`) de manera independent a la lògica de negoci.

Aquesta arquitectura desacoblada permet actualitzar l'aparença de l'aplicació sense necessitat de reiniciar o modificar els contenidors de backend (PHP), millorant l'eficiència del desplegament i la cache del navegador.

---

## 1. Configuració del Servidor (Nginx)

L'arxiu `s6.conf` implementa una política de **Llista Blanca (Whitelisting)** estricta. A diferència d'un servidor web convencional que exposa tot un directori públicament, aquest servei està configurat per servir explícitament només els actius necessaris, millorant la seguretat.

### Directives de Xarxa i Arrel
* **`listen 80;`**
    * El servei escolta trànsit HTTP intern procedent del Proxy Invers (`s1-proxy`).
* **`root /usr/share/nginx/html;`**
    * Ruta on es munten els fitxers locals (`./static/`).
    * **Seguretat:** Aquesta ruta és de només lectura (`:ro`) segons el `docker-compose.yml`, prevenint qualsevol modificació malintencionada dels estils en temps d'execució.

### Ruteig Explícit d'Actius
La configuració no utilitza un bloc genèric `location /`. En el seu lloc, defineix rutes exactes per a cada recurs. Això evita l'enumeració de directoris i l'accés a fitxers no desitjats.

1.  **`location /style.css`**
    * Serveix el full d'estils principal.
    * Utilitza `try_files $uri =404` per assegurar que si l'arxiu no existeix físicament, es talli la connexió immediatament.
2.  **`location /preview.svg`**
    * Serveix el logotip o imatge per defecte del sistema.

---

## 2. Arquitectura del Full d'Estils (Style System)

L'arxiu `style.css` no és una simple col·lecció de regles, sinó que implementa un **Sistema de Disseny (Design System)** modern basat en variables i components modulars.

### A. Variables CSS i Tematització (`:root`)
El sistema utilitza **Custom Properties (Variables CSS)** per defineix la identitat visual globalment.
* **Mantenibilitat:** Canviar el color principal (`--primary`) en un sol lloc actualitza tota l'aplicació instantàniament.
* **Consistència:** Garanteix que els tons pastís (#a8d5e2, #f7b7a3) siguin idèntics a botons, fons i vores.
* **Rendiment:** El navegador calcula els valors una sola vegada i els reutilitza.

### B. Disseny Responsiu i Flexible
El codi implementa tècniques modernes de maquetació sense dependre de frameworks externs pesats:
* **CSS Grid (`.posts-grid`):** Utilitza la funció `repeat(auto-fill, minmax(...))` per crear graelles que s'adapten automàticament a l'amplada de la pantalla sense necessitat de múltiples *media queries*.
* **Flexbox:** Utilitzat extensivament per a l'alineació de components a la capçalera (`.header`) i les targetes de posts.
* **Media Queries:** S'inclou lògica (`@media (max-width: 768px)`) per ajustar la mida de les fonts i l'estructura en dispositius mòbils.

### C. Interactivitat i Animacions (GPU)
S'han definit animacions optimitzades per a l'acceleració per maquinari:
* **`@keyframes fadeInUp` / `slideIn`:** Suavitzen l'entrada d'elements com el formulari de login o els posts, millorant la percepció de qualitat (UX).
* **Transicions (`--transition`):** S'aplica una corba de Bézier cúbica (`cubic-bezier`) per fer que els efectes *hover* dels botons se sentin naturals i no lineals.
* **Backdrop Filter:** Utilitzat a la capçalera per crear l'efecte de "vidre esmerilat" (`blur`) sobre el contingut mentre es fa scroll.

---

## Resum Tècnic

| Recurs | Ruta Interna | Propòsit Tècnic | Optimització |
| :--- | :--- | :--- | :--- |
| **Full d'Estils** | `/style.css` | Defineix variables, layout i animacions. | Ús de `:root` i Grid Layout natiu. |
| **Actiu Gràfic** | `/preview.svg` | Vectoritzat per a escalat infinit. | Pes mínim (<1KB), renderitzat nítid. |
| **Nginx Conf** | `s6.conf` | Ruteig d'actius estàtics. | Whitelisting de rutes (Seguretat). |

---

## Arxius de Configuració

### 1. Configuració Nginx: `s6.conf`

```nginx
server {
    listen 80;
    server_name _;
    root /usr/share/nginx/html;

    # Ruteig explícit per al full d'estils
    location /style.css {
        try_files $uri =404;
    }

    # Ruteig explícit per a imatges del sistema (SVG)
    location /preview.svg {
        try_files $uri =404;
    }
}