# Documentació Tècnica del Servei de Base de Dades (s7-database)

El servei **`s7-database`** és el cor persistent de l'aplicació **Extagram**. Utilitza un motor de base de dades relacional (MySQL/MariaDB) per emmagatzemar la informació textual i les metadades de les publicacions.

La inicialització d'aquest servei és automàtica gràcies a l'ús de l'arxiu `init.sql`, seguint el patró de **"Infrastructure as Code" (IaC)**. Això garanteix que qualsevol nova instància del contenidor es desplegui amb l'estructura de taules correcta des del primer segon.

---

## 1. Estratègia d'Inicialització (`init.sql`)

L'arxiu `init.sql` s'executa automàticament quan el contenidor s'inicia per primera vegada (gràcies al volum muntat a `/docker-entrypoint-initdb.d/`). El script està dissenyat per ser **idempotent**, la qual cosa significa que es pot executar múltiples vegades sense causar errors ni duplicitats.

### Creació de l'Entorn
1.  **`CREATE DATABASE IF NOT EXISTS extagram_db;`**
    * Crea el contenidor lògic de les dades només si no existeix prèviament. Això evita errors fatals si es reinicia el servei.
2.  **`USE extagram_db;`**
    * Selecciona la base de dades activa per assegurar que les taules següents es creïn al lloc correcte.

---

## 2. Arquitectura de la Taula `posts`

La taula `posts` està dissenyada per a l'eficiència i la velocitat de lectura. A continuació es detalla l'estructura tècnica de cada camp:

```sql
CREATE TABLE IF NOT EXISTS posts (
    id INT AUTO_INCREMENT PRIMARY KEY,
    post TEXT NOT NULL,
    photourl VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;